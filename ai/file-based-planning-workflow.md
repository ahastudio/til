# File-based Planning Workflow

íŒŒì¼ ì‹œìŠ¤í…œì„ AI ì—ì´ì „íŠ¸ì˜ ì˜êµ¬ ë©”ëª¨ë¦¬ë¡œ í™œìš©í•˜ëŠ” ì›Œí¬í”Œë¡œìš°ì…ë‹ˆë‹¤.

## í•´ê²°í•˜ëŠ” ë¬¸ì œ

AI ì—ì´ì „íŠ¸ëŠ” ë‹¤ìŒê³¼ ê°™ì€ í•œê³„ê°€ ìˆìŠµë‹ˆë‹¤:

- ì»¨í…ìŠ¤íŠ¸ê°€ ë¦¬ì…‹ë˜ë©´ ì‘ì—… ë‚´ìš©ì„ ìŠì–´ë²„ë¦¼
- ê¸´ ì‘ì—… ì¤‘ì—ëŠ” ì›ë˜ ëª©í‘œë¥¼ ìƒì–´ë²„ë¦¼
- ì‹¤íŒ¨í•œ ì‹œë„ê°€ ì¶”ì ë˜ì§€ ì•Šì•„ ê°™ì€ ì‹¤ìˆ˜ë¥¼ ë°˜ë³µí•¨

## í•´ë²•: 3-File Pattern

ì„¸ ê°œì˜ ì „ìš© íŒŒì¼(plan.md, findings.md, progress.md)ë¡œ ë¶„ë¦¬í•˜ì—¬ ê³„íš, ë°œê²¬ì‚¬í•­, ì§„í–‰ìƒí™©ì„ ê°ê° ê´€ë¦¬í•©ë‹ˆë‹¤.
AIê°€ ì‘ì—… ì „í›„ë¡œ ì´ íŒŒì¼ë“¤ì„ ì½ê³  ì—…ë°ì´íŠ¸í•˜ì—¬ ì˜êµ¬ ë©”ëª¨ë¦¬ë¡œ í™œìš©í•©ë‹ˆë‹¤.

### íŒŒì¼ êµ¬ì¡°

| íŒŒì¼ | ì—­í•  | ì—…ë°ì´íŠ¸ ì‹œì  |
|------|------|--------------|
| **plan.md** | ì „ì²´ ê³„íš ë° ë‹¨ê³„ ì¶”ì  | ìƒˆë¡œìš´ ë‹¨ê³„ ì‹œì‘ ì‹œ |
| **findings.md** | ê¸°ìˆ ì  ë°œê²¬ì‚¬í•­ ë° ê²°ì • | íƒìƒ‰ ë° ì¡°ì‚¬ í›„ ì¦‰ì‹œ |
| **progress.md** | ì„¸ì…˜ë³„ ì‘ì—… ë‚´ì—­ | ê° ì‘ì—… ì„¸ì…˜ë§ˆë‹¤ |

### plan.md

```markdown
# Project: [í”„ë¡œì íŠ¸ëª…]

## Goal

ëª…í™•í•œ ìµœì¢… ëª©í‘œ (ë¶ê·¹ì„± ì—­í• )

## Current Phase

ğŸ”„ Phase 2: Planning & Structure

## Phases

### Phase 1: Requirements & Discovery âœ…

- [x] ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ í™•ì¸
- [x] ê¸°ì¡´ ì½”ë“œë² ì´ìŠ¤ íƒìƒ‰
- [x] ì œì•½ì‚¬í•­ ë¬¸ì„œí™”

### Phase 2: Planning & Structure ğŸ”„

- [x] ì•„í‚¤í…ì²˜ ì„¤ê³„
- [ ] ë””ë ‰í† ë¦¬ êµ¬ì¡° ìƒì„±
- [ ] ì¸í„°í˜ì´ìŠ¤ ì •ì˜

### Phase 3: Implementation â¸ï¸

- [ ] í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„
- [ ] ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì‘ì„±
- [ ] í†µí•©

### Phase 4: Testing & Verification â¸ï¸

- [ ] ìš”êµ¬ì‚¬í•­ ê²€ì¦
- [ ] í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë° ê²°ê³¼ ë¡œê¹…

### Phase 5: Delivery â¸ï¸

- [ ] ìµœì¢… ë¦¬ë·°
- [ ] ì‚¬ìš©ì ì „ë‹¬

## Key Questions

1. ì–´ë–¤ DBë¥¼ ì‚¬ìš©í•˜ë‚˜?
2. ì¸ì¦ ë°©ì‹ì€?

## Decisions Made

| ê²°ì • | ê·¼ê±° |
|------|------|------|
| TypeScript ì‚¬ìš© | íƒ€ì… ì•ˆì „ì„±, íŒ€ í‘œì¤€ |
| PostgreSQL 14 | ì¸ì¦ ë°ì´í„°ì˜ ì •í•©ì„±ê³¼ ì‹ ë¢°ì„± |
| JWT + Redis ì„¸ì…˜ | í™•ì¥ì„± + ë¹ ë¥¸ ë§Œë£Œ ì²˜ë¦¬ |

## Errors Encountered

| ì—ëŸ¬ | ì‹œë„ | í•´ê²° |
|------|------|--------|----------|
| npm install ì‹¤íŒ¨ | 1 | package-lock.json ì‚­ì œ í›„ ì¬ì„¤ì¹˜ |
| TypeScript ì»´íŒŒì¼ ì—ëŸ¬ | 3 | tsconfig strictNullChecks ë¹„í™œì„±í™” |

## Notes

- ì§„í–‰í•  ë•Œë§ˆë‹¤ Phase ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”: ëŒ€ê¸° ì¤‘ â†’ ì§„í–‰ ì¤‘ â†’ ì™„ë£Œ
- ì¤‘ìš”í•œ ê²°ì •ì„ ë‚´ë¦¬ê¸° ì „ì— ì´ ê³„íšì„ ë‹¤ì‹œ ì½ì–´ë³´ì„¸ìš”. ((attention manipulation))
- *ëª¨ë“ * ì˜¤ë¥˜ë¥¼ ê¸°ë¡í•˜ì„¸ìš”. ì‚½ì§ˆì„ ë°˜ë³µí•˜ëŠ” ê±¸ ë§‰ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```

### findings.md

````markdown
# Findings & Decisions

> *ê¸°ìˆ ì  ë°œê²¬, ì¤‘ìš”í•œ ê²°ì •ì´ ìˆì„ ë•Œë§ˆë‹¤ ì´ íŒŒì¼ì„ ì¦‰ì‹œ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.*

## Requirements

- [ ] ì‚¬ìš©ì ë“±ë¡ (ì´ë©”ì¼ + ë¹„ë°€ë²ˆí˜¸)
- [ ] ë¡œê·¸ì¸ ë° ì„¸ì…˜ ê´€ë¦¬
- [ ] ë¹„ë°€ë²ˆí˜¸ ì¬ì„¤ì • ê¸°ëŠ¥
- [ ] ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ

## Research Findings

### ì½”ë“œë² ì´ìŠ¤ êµ¬ì¡°

- ë°±ì—”ë“œ: Express.js + TypeScript
- í”„ë¡ íŠ¸ì—”ë“œ: React 18 + Vite
- DB: PostgreSQL (ëª¨ë¸: Sequelize)
- ì¸ì¦: í˜„ì¬ ì—†ìŒ â†’ ìƒˆë¡œ êµ¬ì¶•

### ê¸°ì¡´ íŒ¨í„´

- API ë¼ìš°íŠ¸: `src/routes/` ë””ë ‰í† ë¦¬
- ë¯¸ë“¤ì›¨ì–´: `src/middleware/`
- ì—ëŸ¬ ì²˜ë¦¬: ì¤‘ì•™í™”ëœ ì—ëŸ¬ í•¸ë“¤ëŸ¬ (`src/utils/errors.ts`)

## Technical Decisions

| ê²°ì • | ì´ìœ  | íŠ¸ë ˆì´ë“œì˜¤í”„ |
|------|------|-------------|
| Passport.js ì‚¬ìš© | ê²€ì¦ëœ ì¸ì¦ ë¼ì´ë¸ŒëŸ¬ë¦¬ | í•™ìŠµ ê³¡ì„  ìˆìŒ |
| JWT í† í° (24ì‹œê°„) | Stateless, í™•ì¥ì„± | ì¦‰ì‹œ ë¬´íš¨í™” ë¶ˆê°€ |
| Redis ì„¸ì…˜ ì €ì¥ì†Œ | ë¹ ë¥¸ ì¡°íšŒ, ìë™ ë§Œë£Œ | ì¶”ê°€ ì¸í”„ë¼ í•„ìš” |
| bcrypt (10 rounds) | ë³´ì•ˆ í‘œì¤€ | ëŠë¦° í•´ì‹± = ì„œë²„ ë¶€í•˜ |

## Issues Encountered

### 1. bcrypt ì„¤ì¹˜ ì‹¤íŒ¨

**ë¬¸ì œ**: node-gyp ì»´íŒŒì¼ ì—ëŸ¬

**í•´ê²°**:
```bash
npm install -g node-gyp
node-gyp rebuild
```
**ê²°ê³¼**: ì„±ê³µ

### 2. Redis ì—°ê²° íƒ€ì„ì•„ì›ƒ

**ë¬¸ì œ**: localhost:6379 ì—°ê²° ì•ˆ ë¨

**ì›ì¸**: Redis ì„œë²„ ë¯¸ì‹¤í–‰

**í•´ê²°**: `docker-compose up redis`

**ê²°ê³¼**: í•´ê²°ë¨

## Resources

### ë¬¸ì„œ

- [Passport.js JWT Strategy](https://www.passportjs.org/packages/passport-jwt/)
- [bcrypt ë³´ì•ˆ ê°€ì´ë“œ](https://github.com/kelektiv/node.bcrypt.js#security-issues-and-concerns)

### ì½”ë“œ ì°¸ì¡°

- ì—ëŸ¬ í•¸ë“¤ëŸ¬: `src/utils/errors.ts:45`
- DB ì„¤ì •: `src/config/database.ts:12`
- í™˜ê²½ ë³€ìˆ˜: `.env.example:8-15`

### API ì—”ë“œí¬ì¸íŠ¸

- POST `/api/auth/register`
- POST `/api/auth/login`
- POST `/api/auth/logout`
- GET `/api/auth/me`

## Learnings

### ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (2025-01-21 10:30)

ERD ë‹¤ì´ì–´ê·¸ë¨ í™•ì¸:

- `users` í…Œì´ë¸”: id, email, password_hash, created_at
- `sessions` í…Œì´ë¸”: ì—†ìŒ (Redis ì‚¬ìš©)
- Foreign keys: `posts.user_id` â†’ `users.id`

### UI ëª©ì—… (2025-01-21 11:00)

Figmaì—ì„œ í™•ì¸í•œ ë¡œê·¸ì¸ í™”ë©´:

- ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
- "Remember me" ì²´í¬ë°•ìŠ¤
- Google OAuth ë²„íŠ¼ (Phase 2ì—ì„œ êµ¬í˜„)
````

### progress.md

ë‚ ì§œìˆœ(ì˜¤ë¦„ì°¨ìˆœ)ìœ¼ë¡œ ê¸°ë¡í•©ë‹ˆë‹¤. ê°€ì¥ ìµœê·¼ ì„¸ì…˜ì´ ë§¨ ì•„ë˜ì— ìœ„ì¹˜í•©ë‹ˆë‹¤.

```markdown
# Progress Log

> *ê° ë‹¨ê³„ë¥¼ ì™„ë£Œí•˜ê±°ë‚˜ ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ì—…ë°ì´íŠ¸í•˜ì„¸ìš”.*

## Session 2025-01-20

### Phase 1: Requirements & Discovery âœ…

**ì‘ì—… ë‚´ì—­**:

1. ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ ë¬¸ì„œí™”
2. ì½”ë“œë² ì´ìŠ¤ íƒìƒ‰ ì™„ë£Œ
3. ê¸°ìˆ  ìŠ¤íƒ ì¡°ì‚¬ ë° ê²°ì •

**ìƒì„±/ìˆ˜ì • íŒŒì¼**:

- `docs/auth-requirements.md` (ìƒˆë¡œ ìƒì„±)

---

## Session 2025-01-21

### Phase 2: Planning & Structure ğŸ”„

**ì‘ì—… ë‚´ì—­**:

1. í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ê³„ ì™„ë£Œ
2. ì˜ì¡´ì„± íŒ¨í‚¤ì§€ ì„¤ì¹˜
   - passport
   - passport-jwt
   - bcrypt
   - jsonwebtoken
   - redis
3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì • (.env.example ì—…ë°ì´íŠ¸)

**ìƒì„±/ìˆ˜ì • íŒŒì¼**:

- `src/auth/passport-config.ts` (ìƒˆë¡œ ìƒì„±)
- `src/middleware/auth.ts` (ìƒˆë¡œ ìƒì„±)
- `src/types/user.ts` (ìƒˆë¡œ ìƒì„±)
- `.env.example` (ìˆ˜ì •)

### Phase 3: Implementation â¸ï¸

ì•„ì§ ì‹œì‘ ì•ˆ í•¨

## Test Results

| í…ŒìŠ¤íŠ¸ëª… | ì…ë ¥ | ì˜ˆìƒ ê²°ê³¼ | ì‹¤ì œ ê²°ê³¼ | í†µê³¼ |
|---------|------|----------|----------|------|
| ì‚¬ìš©ì ë“±ë¡ | valid email/password | 201 Created | 201 Created | âœ… |
| ì¤‘ë³µ ì´ë©”ì¼ ë“±ë¡ | existing email | 409 Conflict | 409 Conflict | âœ… |
| ì˜ëª»ëœ ë¡œê·¸ì¸ | wrong password | 401 Unauthorized | 500 Error | âŒ |
| JWT ê²€ì¦ | valid token | user object | user object | âœ… |

## Error Log

| ì‹œê° | ë‹¨ê³„ | ì—ëŸ¬ ìœ í˜• | ì‹œë„ | í•´ê²° ë°©ë²• |
|------|------|----------|------|-----------|
| 09:15 | Setup | bcrypt ì„¤ì¹˜ ì‹¤íŒ¨ | 1 | node-gyp ì¬ë¹Œë“œ |
| 10:30 | Config | Redis ì—°ê²° ì‹¤íŒ¨ | 1 | Docker ì»¨í…Œì´ë„ˆ ì‹œì‘ |
| 11:45 | Test | ë¹„ë°€ë²ˆí˜¸ ê²€ì¦ 500 ì—ëŸ¬ | 2 | bcrypt.compare await ì¶”ê°€ |
| 14:20 | Test | JWT ë§Œë£Œ ì‹œê°„ ì—ëŸ¬ | 1 | expiresIn í˜•ì‹ ìˆ˜ì • ('24h') |

## 5-Question Reboot Check

ì‘ì—… ì¬ê°œ ì‹œ ì´ ì§ˆë¬¸ë“¤ë¡œ ì»¨í…ìŠ¤íŠ¸ ë³µêµ¬:

| ì§ˆë¬¸ | ë‹µë³€ |
|------|------|
| 1. í˜„ì¬ ì–´ëŠ ë‹¨ê³„ì¸ê°€? | Phase 2: Planning & Structure (90% ì™„ë£Œ) |
| 2. ë‹¤ìŒì— í•  ì¼ì€? | Phase 3 ì‹œì‘: ì‚¬ìš©ì ë“±ë¡ ì—”ë“œí¬ì¸íŠ¸ êµ¬í˜„ |
| 3. ì „ì²´ ëª©í‘œëŠ”? | ì„¸ì…˜ ê´€ë¦¬ë¥¼ í¬í•¨í•œ ì•ˆì „í•œ ì‚¬ìš©ì ì¸ì¦ ì‹œìŠ¤í…œ êµ¬ì¶• |
| 4. ì§€ê¸ˆê¹Œì§€ ë°°ìš´ ê²ƒ? | - Redis í•„ìˆ˜, bcrypt async ì²˜ë¦¬ í•„ìš”, JWT í˜•ì‹ ì£¼ì˜ |
| 5. ì™„ë£Œí•œ ì‘ì—…ì€? | í”„ë¡œì íŠ¸ êµ¬ì¡° ì„¤ê³„, ì˜ì¡´ì„± ì„¤ì¹˜, ì„¤ì • íŒŒì¼ ìƒì„± |
```

## ë¹„êµ: Spec-Driven Development

**Spec-Driven Development**: "ë¬´ì—‡ì„" ë§Œë“¤ì§€ ì‚¬ì „ì— ëª…í™•íˆ ì •ì˜
(Top-down, ê³„íš ì¤‘ì‹¬)

**File-based Planning**: "ì–´ë–»ê²Œ" ì§„í–‰ë˜ëŠ”ì§€ ê³¼ì •ì„ ì¶”ì 
(Bottom-up, íƒìƒ‰ ì¤‘ì‹¬)

í•¨ê»˜ ì‚¬ìš©í•˜ë©´: Specìœ¼ë¡œ ë°©í–¥ì„ ì •í•˜ê³ , Planningìœ¼ë¡œ ê³¼ì •ì„ ì¶”ì 

[Spec-Driven Development](./spec-driven-development.md)

## êµ¬í˜„ ì‚¬ë¡€

[Planning with Files](../claude/planning-with-files.md) -
Claude Code í”ŒëŸ¬ê·¸ì¸
