# 2022-12-06 (화)

## <https://winteringg.tistory.com/268>

지금 코드는 mocking을 너무 많이 하는 걸로 보입니다.

1. assets는 전부 static files로 관리하세요.
  아니면 `__mocks__`를 활용하세요.
  저는 전자를 강력히 추천합니다.
2. Page 같이 상위 레벨의 컴포넌트라면
  React Router를 mocking하지 말고
  `MemoryRouter`를 활용하세요.
  개별 요소로 가면 `Link` 정도만 mocking하면 되는데,
  상위 레벨로 오면 mocking해야 하는 게 너무 많습니다.
  테스트를 하는 건지 해킹을 하는 건지 애매하다고 느낄 수도 있어요.
  게다가 너무 쉽게 깨집니다.
  원툴로 진행하지 마시라고 다양한 mocking 방법을 알려드린 거니
  상황에 맞는 걸 선택/조율하세요.
  대부분은 작업 중에 적절한 걸로 갈아타게 됩니다.
3. `useBlahStore`를 mocking하는 게 복잡해지면
  `BlahStore`를 돌려주거나 MSW를 도입하세요.
  TypeScript면 바로 문제를 지적해 주는데,
  그냥 JavaScript에선 Store를 크게 리팩터링하면
  관련 컴포넌트 테스트가 다 거짓말을 하게 됩니다.
  테스트는 통과되는데(mocking했으니),
  실제로 웹 브라우저에서 보면 안 되는 거죠.
  간단한 걸 처리할 때와 복잡한 걸 처리할 때는
  전략이 달라져야 합니다.

## <https://justdoit7938.tistory.com/187>

String으로 받아서 JSON parsing을 하고 있는데,
DTO로 바로 받을 수 있습니다(외부 전달용 DTO는 아닙니다).
제가 쓰는 코드는 이런 모양이예요.
타입 안정적이고, 코드도 훨씬 짧아집니다.

```java
    ResponseEntity<KakaoUserDto> response = restTemplate.exchange(
            url, HttpMethod.GET, request, KakaoUserDto.class);

    KakaoUserDto userDto = response.getBody();
```
