# 2022-11-24

## <https://seungjjun.tistory.com/199>

DB에 들어가면 안 되는 필드로 보입니다.
`@Transient` 같은 걸로 영속화되지 않게 해주세요.

이것과 별개로,
슬슬 DB 마이그레이션 도구 등을 도입하면 좋을 것 같아 보입니다.
저는 Flyway나 아예 다른 도구(예를 들어
뜬금 없이 Rails나 db-migrate)를 여기에 도입하곤 합니다.

<https://github.com/ahastudio/til/blob/main/blog/2016/05-24-flyway.md>

<https://guides.rubyonrails.org/active_record_migrations.html>

<https://github.com/db-migrate/node-db-migrate>

## <https://velog.io/@zzezze/TIL-Controller%EC%9D%98-%EC%97%AD%ED%95%A0-%EC%89%BD%EA%B2%8C-%ED%83%90%EC%83%89%ED%95%98%EA%B8%B0>

“스프링에서 웹 애플리케이션을 만들 때
Controller - Service - Repository 이용해 구현”하는 건
제가 계속 그렇지 않다고 강조하는 부분입니다.
UI 레이어에 컨트롤러가 들어가는 거고,
애플리케이션 레이어에 애플리케이션 서비스가
들어갑니다(서비스는 모든 레이어에 존재할 수 있습니다).
리파지터리는 있을 수도 있고 없을 수도 있는데,
리파지터리의 인터페이스는 도메인 레이어에 속하고,
구현은 인프라스트럭처 레이어에 속합니다.
리파지터리는 컬렉션과 같은 역할을 하는데,
일반적으론 컬렉션을 필요로 하니까 우연히도 매번 등장하기 마련이죠.
도메인 서비스는 자주 등장하지 않고,
인프라스트럭처 서비스는 service란 postfix를 붙이지 않아서
우연히도 애플리케이션 서비스가 서비스의 전부인 것처럼 보이는 거고요.
각 레이어를 나눠주는 이유는 이들이 서로 큰 상관이 없게 하기 위함이지
어떤 연쇄로 이들이 강한 관계를 갖고 있는 것처럼 표현하기 위험이 아닙니다.
UI와 로직을 구분하는 건 구분에 무게를 두는 거지
UI-로직 연쇄 같이 파악하려는 게 아니에요.
관심사의 분리를 통해 내가 지금 하는 작업,
하나의 모듈이 책임져야 하는 부분을 확실히 하는 게 가장 중요합니다.

종립님 글을 소개한 건 그게 좋아서가 아닙니다.
잘못된 상황에 대한 예를 든 거죠.
“지금 만드는 것들은 크기가 크지 않은데도 불구하고
어디에 뭐가 있는지 혼동되는 경우가 생긴다”면
심각한 문제가 있다는 겁니다.
그럴 수가 없는 게 “Controller를 사용하는 이유는
리소스 단위로 묶어서 관리하기 위함이고
이건 하나의 URL을 의미하기” 때문이죠.

## <https://onulmansanda.tistory.com/229>

비유가 적절하진 않지만, 둘은 Java와 JavaScript의 관계라고 해도 됩니다.
겉모양이 유사하다고 보시는 편이 낫죠.
둘 다 Mockito의 mock이긴 한데,
어디에 인젝션하냐가 아주 큰 차이를 가져오기 때문에 -
그리고 이 부분에서 헷갈리기 때문에 - 확연히 다르게 취급하는 게 낫습니다.
`@Mock`은 쓰지 않아도 되고(그냥 `mock`을 바로 쓰는 게 더 낫습니다),
`@MockBean`은 써야 한다는 것도 여기서 파생되죠.
`@MockBean`이 없던 시절에 어떻게 했는지는
<https://youtu.be/-hqiLswBiY8> 28분 48초부터 보시면 됩니다.
