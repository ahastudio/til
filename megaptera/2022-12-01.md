# 2022-12-01

## <https://innu3368.tistory.com/198>

에러 상황에서 `gameId` 줘도 됩니다.
대신 프론트엔드에서 `gameId`를 받았는지 안 받았는지
계속 검사해야겠죠(에러가 나는 원인이 다양할 수 있으니까요).
그런데, 화면에 있는 게 여럿이고
이것과 결과를 정확히 매칭하고 싶은 거라면
`gameId` 같은 거 필요 없습니다.
“이 요청은 이 녀석에 대한 겁니다”를 우리는 잘 알고 있고,
에러가 나면 “이 녀석에 대한 요청이 실패했군”이라고 알 수 있습니다.
전부 프론트엔드에서 할 수 있죠.
이걸 구현하는 위치도 엄청나게 다양합니다.
예를 들어, 리액트 컴포넌트에서 예외를 잡으면
어느 버튼을 눌렀을 때인지 알 수 있고(비추),
스토어에서 예외를 잡으면 어떤 game에 대한 건지 알 수 있고(강추),
API 서비스에서 잡으면 어떤 `gameId`에 대한 요청인지 알 수 있죠(비추).
어떤 기술적인 선택을 할 땐
목적이 뭔지 명확히 하고 가장 쉬운 방법을 택하면 됩니다.
이건 백엔드가 개입할 일이 없는 케이스죠.

이것과 별개로,
참가 신청이란 게 그냥 가볍게 넘어가도 되는 건지
UX 차원에서 살펴보는 게 좋습니다.
목록에서 참가 신청 버튼 여러 개를 다다다다다 눌러도 되는 건가요?
상품 주문 등을 생각해 보시면 그렇게 진행하진 않습니다.
하지만 쿠폰 받기 같은 건 그렇게 할 수 있죠.
해당 행위의 무게 및 결과 안내가 중요한 경우와
그렇지 않은 경우가 나뉘는 거죠.
저는 참가 신청은 전자에 가깝지 않나 싶어요.

## <https://cooked-chord-72b.notion.site/TIL-3-a5547f7df24e487cbe7275dbc05ea706>

화면을 중심으로 테스트하면 mocking을 엄청 많이 해야 합니다.
그런데 그 화면은 (상대적으로) 자주 바뀔 겁니다.
특히 뭘 누르고 그게 처리된 결과가 보이고 하는 걸 테스트하려고 하면
이 스트레스가 아주 심해질 거예요.
MSW를 쓴다면,
거기에 아예 백엔드를 한번 더 만드는 일이 벌어질 수도 있죠.

일반적으론 UI는 테스트하지 않습니다.
하지만 UI를 테스트할 수 있으면 좋잖아요?
그래서 우리는 해당 기술을 배운 겁니다.
프론트엔드에도 아키텍처가 있고,
그 덕분에 우리는 더 중요한 곳(이런 곳은 대개 mock이나
인프라 관련 코드가 적습니다)에 집중할 수 있습니다.

백엔드는 대부분의 테스트가 도메인 레이어에 대한 것이어야 합니다.
컨트롤러나 애플리케이션 서비스에 대한 코드를 많이 쓰고 있다면
관심사 분리, 객체지향 설계 등이 잘못 됐다는 강력한 신호죠(심지어
테스트 코드가 너무 복잡할 겁니다).
스프링 등의 개입 없이 평범한 JUnit과 Java로 코딩하는 게
대부분이어야 합니다.
하지만 모든 부분을 테스트해야 하니 MockMvc 같은 것도 배운 거죠.

프론트엔드도 마찬가지입니다.
React Testing Library를 이용해서 코드를 작성하려고 하면
테스트 상황이 하나 추가되기만 해도 엄청난 양의 코드를 써줘야 합니다.
백엔드와 마찬가지로,
Jest와 JavaScript로 코딩하는 게 대부분이어야 합니다.
모든 걸 테스트하기 위해 React 컴포넌트를 테스트하는 법을 배운 거지,
이게 핵심인 건 아니죠.

- <https://youtu.be/-kUmsKRmOnA>
- <https://youtu.be/RoQtNLl-Wko>

만약 AT를 작성 중이라면 기술적이지 않게 하세요.
여기가 복잡하면 사용자 스토리에 해당하는
시나리오 자체가 복잡할 가능성이 큽니다.
예를 들어, “상품 5개를 준비했더니 상품 5개가 보여” 같은 건
적합하지 않습니다.
“상품을 감추기 했더니 안 보여” 같은 게 단순하고,
사용자 입장에서 가치를 느낄 수 있죠.
